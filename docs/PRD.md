# PRD: Sora Extend Korean - AI 기반 장편 영상 생성 플랫폼

## 문서 정보

- **작성일**: 2025-10-12
- **버전**: 1.0
- **작성자**: Development Team
- **상태**: Draft

---

## 1. 제품 개요

### 1.1 목적 (Purpose)

사용자가 단 하나의 텍스트 프롬프트만으로 **30초 이상의 일관된 고품질 AI 영상**을 자동 생성할 수 있는 웹 기반 플랫폼을 제공합니다.

### 1.2 문제 정의 (Problem Statement)

- **현재 문제**:
  - OpenAI Sora 2는 12초까지만 생성 가능
  - 여러 세그먼트를 수동으로 연결하면 일관성이 떨어짐
  - 프롬프트 엔지니어링에 전문 지식 필요
  - 비디오 편집 도구 사용이 복잡함

- **해결 방안**:
  - AI가 자동으로 프롬프트를 세그먼트별로 분해
  - 이전 프레임을 참조하여 일관성 유지
  - 웹 UI로 간단한 입력만으로 완성 영상 생성
  - 후처리 자동화 (병합, 인코딩)

### 1.3 핵심 가치 제안 (Value Proposition)

1. **간편함**: 프롬프트 하나로 30초+ 영상 생성
2. **일관성**: AI가 세그먼트 간 연속성 보장
3. **속도**: 수동 작업 대비 10배 빠른 제작
4. **품질**: Sora 2의 고품질 출력 유지

---

## 2. 대상 사용자 (Target Users)

### 2.1 주요 페르소나

**페르소나 1: 콘텐츠 크리에이터**

- **배경**: 유튜브, TikTok 등에서 활동하는 개인 크리에이터
- **니즈**: 빠르게 아이디어를 영상으로 테스트
- **페인 포인트**: 편집 시간, 비용, 전문 도구 부족
- **사용 시나리오**: 스토리보드 시각화, B-roll 생성

**페르소나 2: 마케팅/브랜드 팀**

- **배경**: 스타트업 또는 중소기업 마케팅 담당자
- **니즈**: 제품 데모, 광고 영상의 빠른 프로토타이핑
- **페인 포인트**: 외주 비용, 긴 제작 기간
- **사용 시나리오**: A/B 테스트용 샘플 영상 제작

**페르소나 3: 교육/트레이닝 담당자**

- **배경**: 온라인 교육 콘텐츠 제작자
- **니즈**: 설명 영상, 시뮬레이션 생성
- **페인 포인트**: 제작 리소스 부족
- **사용 시나리오**: 강의 자료 시각화

### 2.2 제외 사용자

- 전문 영화/광고 제작 (최종 품질 요구사항 초과)
- 실시간 스트리밍 콘텐츠 (지연 시간)

---

## 3. 기능 요구사항 (Functional Requirements)

### 3.1 핵심 기능 (MVP Scope)

#### F1. 영상 생성 요청

- **입력 폼**:
  - 프롬프트 (텍스트, 최대 500자)
  - 세그먼트 길이 선택 (4초/8초/12초)
  - 세그먼트 개수 (2~10개)
  - 해상도 (720p/1080p)
  - 화면비 (16:9/9:16/1:1)
- **검증**:
  - 프롬프트 필수 입력
  - 세그먼트 개수 제한 (최대 총 120초)
  - 부적절한 키워드 필터링 (욕설, 폭력 등)

#### F2. 작업 상태 모니터링

- **실시간 진행 상태**:
  - 대기 중 (Queued)
  - 프롬프트 계획 생성 (Planning)
  - 세그먼트 생성 중 (Generating X/N)
  - 병합 중 (Merging)
  - 완료 (Completed)
  - 실패 (Failed)
- **진행률 표시**: 0~100% 프로그레스 바
- **로그 스트림**: 각 단계별 상세 로그 (선택적)

#### F3. 결과 다운로드

- **완료 화면**:
  - 비디오 플레이어 (임베디드)
  - 다운로드 버튼 (.mp4)
  - 공유 링크 (24시간 유효)
- **메타데이터 표시**:
  - 총 길이, 해상도, 파일 크기
  - 생성 시간, 프롬프트

#### F4. 사용자 인증 (Phase 2)

- Supabase Auth 연동
- 이메일/비밀번호 로그인
- 소셜 로그인 (Google, GitHub)

#### F5. 생성 이력 (Phase 2)

- 사용자별 과거 생성 목록
- 재생성/재다운로드 기능
- 프롬프트 템플릿 저장

### 3.2 제외 기능 (Out of Scope for MVP)

- 영상 편집 (트리밍, 필터, 자막)
- 오디오 트랙 추가/믹싱
- 멀티 사용자 협업
- API 외부 제공

---

## 4. 비기능 요구사항 (Non-Functional Requirements)

### 4.1 성능 (Performance)

- **응답 시간**:
  - 작업 생성: < 500ms
  - 상태 조회: < 200ms
  - 프롬프트 계획: < 10초
- **처리 시간**:
  - 세그먼트 생성: 1~3분/개 (fal.ai 의존)
  - 총 소요: 세그먼트 개수 × 2분 (평균)
- **동시 처리**: 초기 1개, 확장 시 5개

### 4.2 가용성 (Availability)

- **목표 Uptime**: 99.5% (MVP)
- **장애 복구**: 작업 중단 시 재시작 가능

### 4.3 확장성 (Scalability)

- **사용자 수**: 초기 100명, 확장 시 10,000명
- **저장소**: 로컬 → Supabase Storage/S3
- **큐**: 메모리 → Redis/RQ

### 4.4 보안 (Security)

- **데이터 보호**:
  - API 키는 서버 환경변수에만 저장
  - HTTPS 강제 (운영 환경)
  - 파일 경로 검증 (디렉토리 탈출 방지)
- **인증/권한**:
  - Supabase Auth JWT 검증
  - Row Level Security (RLS)
- **Rate Limiting**:
  - 사용자당 시간당 10회 생성 제한

### 4.5 사용성 (Usability)

- **학습 곡선**: 5분 이내 첫 영상 생성
- **접근성**: WCAG 2.1 AA 수준
- **반응형**: 데스크톱, 태블릿, 모바일 지원

### 4.6 유지보수성 (Maintainability)

- **코드 품질**: ESLint, Prettier, Black (Python)
- **문서화**: API 문서 자동 생성 (FastAPI Swagger)
- **로깅**: 구조화된 로그 (JSON 포맷)

---

## 5. 사용자 스토리 (User Stories)

### US-1: 영상 생성

**As a** 콘텐츠 크리에이터
**I want to** 프롬프트만 입력하고 30초 영상을 받고 싶다
**So that** 편집 시간을 절약할 수 있다

**인수 기준**:

- [ ] 프롬프트 입력 후 "생성" 버튼 클릭
- [ ] 진행 상태가 실시간으로 표시됨
- [ ] 완료 시 비디오 플레이어에서 바로 재생 가능
- [ ] 다운로드 버튼으로 .mp4 파일 저장

### US-2: 오류 처리

**As a** 사용자
**I want to** 생성 실패 시 명확한 오류 메시지를 보고 싶다
**So that** 문제를 해결하고 재시도할 수 있다

**인수 기준**:

- [ ] API 크레딧 부족 시 "크레딧을 충전하세요" 메시지
- [ ] 네트워크 오류 시 재시도 버튼 제공
- [ ] 부적절한 프롬프트 시 경고 표시

### US-3: 이력 조회 (Phase 2)

**As a** 등록 사용자
**I want to** 과거에 생성한 영상을 다시 보고 싶다
**So that** 재사용하거나 참고할 수 있다

**인수 기준**:

- [ ] "내 영상" 페이지에서 썸네일 목록 표시
- [ ] 클릭 시 상세 페이지로 이동
- [ ] 재다운로드 가능

---

## 6. 기술 스택 (Technology Stack)

### 6.1 프론트엔드

- **프레임워크**: Next.js 14+ (App Router)
- **UI 라이브러리**: Radix UI, Tailwind CSS
- **상태 관리**: React Query, Zustand
- **타입체크**: TypeScript

### 6.2 백엔드

- **API 서버**: FastAPI (Python 3.11+)
- **데이터베이스**: Supabase (PostgreSQL)
- **작업 큐**: FastAPI BackgroundTasks → Redis/RQ
- **스토리지**: 로컬 → Supabase Storage

### 6.3 AI/비디오 처리

- **프롬프트 계획**: OpenAI GPT-4o
- **영상 생성**: fal.ai Sora 2 API
- **비디오 처리**: MoviePy, OpenCV (Python)

### 6.4 인프라

- **호스팅**:
  - 프론트엔드: Vercel
  - 백엔드: Railway/Render (초기), AWS EC2 (확장)
- **모니터링**: Sentry (에러), Uptime Kuma (상태)
- **로깅**: Python logging → Loki (향후)

---

## 7. 사용자 플로우 (User Flow)

### 7.1 메인 플로우

```
[홈페이지]
  ↓ "영상 생성하기" 클릭
[입력 폼]
  ↓ 프롬프트/옵션 입력 후 "생성" 클릭
[작업 대기]
  ↓ 작업 ID 발급, 백그라운드 처리 시작
[진행 상태 페이지]
  ↓ 폴링으로 실시간 업데이트
  ├─ 계획 생성 (10%)
  ├─ 세그먼트 1 생성 (30%)
  ├─ 세그먼트 2 생성 (50%)
  ├─ ...
  └─ 병합 (90%)
[완료 페이지]
  ↓ 비디오 플레이어 + 다운로드 버튼
[다운로드 완료]
```

### 7.2 오류 플로우

```
[진행 상태 페이지]
  ↓ 오류 발생 (예: API 크레딧 부족)
[오류 메시지 표시]
  ├─ 재시도 버튼 → [작업 대기]
  └─ 홈으로 버튼 → [홈페이지]
```

---

## 8. 성공 지표 (Success Metrics)

### 8.1 제품 지표

- **생성 성공률**: 95% 이상
- **평균 완료 시간**: 8초 세그먼트 4개 기준 < 10분
- **사용자 만족도**: NPS 50+ (향후 설문)

### 8.2 비즈니스 지표

- **주간 활성 사용자(WAU)**: 100명 (MVP 목표)
- **재방문율**: 30% 이상
- **평균 생성 횟수/사용자**: 3회 이상

### 8.3 기술 지표

- **API 오류율**: < 5%
- **평균 응답 시간**: < 500ms (상태 조회)
- **서버 Uptime**: 99.5%

---

## 9. 위험 및 완화 전략 (Risks & Mitigation)

### 9.1 기술적 위험

| 위험                      | 영향 | 확률 | 완화 전략                              |
| ------------------------- | ---- | ---- | -------------------------------------- |
| fal.ai API 장애           | 높음 | 중간 | 재시도 로직, 상태 저장, 대체 모델 검토 |
| 메모리 부족 (비디오 처리) | 중간 | 중간 | 작업 큐로 순차 처리, 서버 메모리 증설  |
| 프롬프트 계획 품질 저하   | 중간 | 낮음 | GPT-4o 시스템 프롬프트 튜닝, 예시 추가 |
| 파일 저장소 용량 초과     | 낮음 | 중간 | 24시간 후 자동 삭제, 클라우드 전환     |

### 9.2 비즈니스 위험

| 위험               | 영향 | 확률 | 완화 전략                                |
| ------------------ | ---- | ---- | ---------------------------------------- |
| API 비용 급증      | 높음 | 중간 | 사용자당 생성 제한, 크레딧 시스템 도입   |
| 저작권 문제        | 높음 | 낮음 | 부적절한 프롬프트 필터링, 이용 약관 명시 |
| 낮은 사용자 채택률 | 중간 | 중간 | 베타 테스터 피드백, 온보딩 개선          |

---

## 10. 마일스톤 및 일정 (Milestones & Timeline)

### Phase 1: MVP (4주)

- **Week 1-2**: 백엔드 API 구현
  - [ ] FastAPI 서버 구축
  - [ ] fal.ai API 통합
  - [ ] 작업 큐 구현 (BackgroundTasks)
  - [ ] 로컬 파일 저장
- **Week 3**: 프론트엔드 구현
  - [ ] Next.js 프로젝트 설정
  - [ ] 입력 폼 UI
  - [ ] 진행 상태 페이지 (폴링)
  - [ ] 결과 페이지 (비디오 플레이어)
- **Week 4**: 테스트 및 배포
  - [ ] 통합 테스트
  - [ ] 버그 수정
  - [ ] 스테이징 배포 (Vercel + Railway)

### Phase 2: 사용자 기능 (4주)

- **Week 5-6**:
  - [ ] Supabase Auth 연동
  - [ ] 생성 이력 페이지
  - [ ] 사용자 대시보드
- **Week 7-8**:
  - [ ] API 키 관리 UI
  - [ ] 크레딧 시스템 초안
  - [ ] 프로덕션 배포

### Phase 3: 확장 (4주)

- **Week 9-10**:
  - [ ] Redis 작업 큐 전환
  - [ ] Supabase Storage 연동
  - [ ] CDN 설정
- **Week 11-12**:
  - [ ] WebSocket 실시간 로그
  - [ ] 모니터링 대시보드 (Grafana)
  - [ ] 성능 최적화

---

## 11. 오픈 이슈 및 결정 사항 (Open Issues)

### 11.1 미결정 사항

- [ ] 무료/유료 모델 결정 (크레딧 제공 방식)
- [ ] 최대 영상 길이 제한 (120초 vs 무제한)
- [ ] 워터마크 삽입 여부

### 11.2 후속 논의 필요

- [ ] 사용자 피드백 수집 방법 (베타 테스트)
- [ ] A/B 테스트 계획 (UI 최적화)
- [ ] 마케팅 전략 (런칭 방식)

---

## 12. 부록 (Appendix)

### 12.1 용어 정의

- **세그먼트**: 4/8/12초 단위의 개별 비디오 클립
- **프롬프트 계획**: GPT-4가 생성한 세그먼트별 상세 프롬프트
- **참조 프레임**: 이전 세그먼트의 마지막 프레임 이미지

### 12.2 참고 문서

- **fal.ai API 문서**: https://fal.ai/models/fal-ai/sora-2/image-to-video/pro/api
- **FastAPI 문서**: https://fastapi.tiangolo.com
- **Next.js 문서**: https://nextjs.org/docs

---

**문서 승인**:

- Product Owner: ******\_\_\_******
- Tech Lead: ******\_\_\_******
- Date: 2025-10-12
